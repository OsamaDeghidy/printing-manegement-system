import { formatDate } from "@/lib/utils";
import { services } from "@/data/services";

export type OrderStatus =
  | "draft"
  | "pending"
  | "in_review"
  | "approved"
  | "in_production"
  | "ready"
  | "rejected"
  | "cancelled";

export interface OrderFieldValue {
  id: string;
  fieldId: string;
  label: string;
  key: string;
  value: unknown;
}

export interface OrderAttachment {
  id: string;
  type: "file" | "link";
  name: string;
  url: string;
  sizeKb?: number;
}

export interface OrderApprovalSummary {
  id: string;
  approver?: string;
  step: number;
  decision: "pending" | "approved" | "rejected";
  comment?: string;
  decidedAt?: string;
}

export interface OrderStatusEntry {
  id: string;
  status: OrderStatus;
  note?: string;
  updatedBy?: string;
  updatedAt: string;
}

export interface OrderSummary {
  id: string;
  orderCode: string;
  service: {
    id: string;
    name: string;
    slug: string;
    icon?: string;
  };
  requester: {
    name: string;
    department?: string;
  };
  quantity?: number;
  status: OrderStatus;
  priority: "low" | "medium" | "high";
  submittedAt: string;
  requiresApproval: boolean;
}

export interface OrderDetail extends OrderSummary {
  orderType?: "order" | "design_order" | "print_order"; // Ù†ÙˆØ¹ Ø§Ù„Ø·Ù„Ø¨ Ù„ØªØ­Ø¯ÙŠØ¯ Ø§Ù„Ù€ endpoint Ø§Ù„ØµØ­ÙŠØ­
  fieldValues: OrderFieldValue[];
  attachments: OrderAttachment[];
  approvals: OrderApprovalSummary[];
  statusHistory: OrderStatusEntry[];
}

export const mockOrders: OrderDetail[] = [
  {
    id: "9b44a7cc-e5ad-4142-90ac-7df62374ef11",
    orderCode: "TP-251103-0001",
    service: {
      id: "svc-cards",
      name: "Ø·Ø¨Ø§Ø¹Ø© ÙƒØ±ÙˆØª Ø´Ø®ØµÙŠØ©",
      slug: "business-cards",
      icon: "ðŸŽ´",
    },
    requester: {
      name: "Ø¯. Ø£Ø­Ù…Ø¯ Ù…Ø­Ù…Ø¯",
      department: "Ø¹Ù„ÙˆÙ… Ø§Ù„Ø­Ø§Ø³Ø¨",
    },
    submittedAt: formatDate("2025-11-03T12:30:00Z"),
    quantity: 100,
    status: "in_review",
    priority: "high",
    requiresApproval: true,
    fieldValues: [
      {
        id: "fv-1",
        fieldId: "card-name-ar",
        label: "Ø§Ù„Ø§Ø³Ù… Ø¨Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©",
        key: "name_ar",
        value: "Ø¯. Ø£Ø­Ù…Ø¯ Ù…Ø­Ù…Ø¯ Ø§Ù„Ø³Ø§Ù„Ù…",
      },
      {
        id: "fv-2",
        fieldId: "card-name-en",
        label: "Ø§Ù„Ø§Ø³Ù… Ø¨Ø§Ù„Ø¥Ù†Ø¬Ù„ÙŠØ²ÙŠØ©",
        key: "name_en",
        value: "Dr. Ahmed Mohammed Alsalem",
      },
      {
        id: "fv-3",
        fieldId: "card-quantity",
        label: "Ø§Ù„ÙƒÙ…ÙŠØ©",
        key: "quantity",
        value: 100,
      },
    ],
    attachments: [
      {
        id: "att-1",
        type: "file",
        name: "Ù‚Ø±Ø§Ø±-Ø§Ù„ØªÙƒÙ„ÙŠÙ.pdf",
        url: "#",
        sizeKb: 820,
      },
    ],
    approvals: [
      {
        id: "app-1",
        approver: "Ø£. ÙØ§Ø·Ù…Ø© Ø§Ù„Ø´Ù…Ø±ÙŠ",
        step: 1,
        decision: "pending",
        comment: undefined,
      },
    ],
    statusHistory: [
      {
        id: "hst-1",
        status: "pending",
        updatedBy: "Ù†Ø¸Ø§Ù… Ø§Ù„Ù…Ù†ØµØ©",
        updatedAt: formatDate("2025-11-03T12:30:00Z"),
      },
      {
        id: "hst-2",
        status: "in_review",
        note: "Ø¨Ø§Ù†ØªØ¸Ø§Ø± Ù‚Ø±Ø§Ø± Ø£. ÙØ§Ø·Ù…Ø© Ø§Ù„Ø´Ù…Ø±ÙŠ",
        updatedBy: "Ø£. ÙØ§Ø·Ù…Ø© Ø§Ù„Ø´Ù…Ø±ÙŠ",
        updatedAt: formatDate("2025-11-03T13:05:00Z"),
      },
    ],
  },
  {
    id: "2b191790-f421-4d28-9a4d-5d7a5edf7681",
    orderCode: "TP-251102-0007",
    service: {
      id: "svc-banners",
      name: "Ø·Ø¨Ø§Ø¹Ø© Ø¨Ù†Ø±Ø§Øª",
      slug: "banners",
      icon: "ðŸ–¼ï¸",
    },
    requester: {
      name: "Ù‚Ø³Ù… Ø§Ù„Ø¥Ø¹Ù„Ø§Ù…",
      department: "Ø¹Ù…Ø§Ø¯Ø© Ø´Ø¤ÙˆÙ† Ø§Ù„Ø·Ù„Ø§Ø¨",
    },
    submittedAt: formatDate("2025-11-02T09:45:00Z"),
    quantity: 5,
    status: "in_production",
    priority: "medium",
    requiresApproval: true,
    fieldValues: [
      {
        id: "fv-4",
        fieldId: "banner-reason",
        label: "Ø³Ø¨Ø¨ Ø§Ù„Ø·Ù„Ø¨",
        key: "reason",
        value: "Ø§Ù„Ù…Ø¤ØªÙ…Ø± Ø§Ù„Ø¯ÙˆÙ„ÙŠ Ù„Ù„Ø¥Ø¹Ù„Ø§Ù… 2025",
      },
      {
        id: "fv-5",
        fieldId: "banner-quantity",
        label: "Ø§Ù„ÙƒÙ…ÙŠØ©",
        key: "quantity",
        value: 5,
      },
    ],
    attachments: [
      {
        id: "att-2",
        type: "file",
        name: "ØªØµÙ…ÙŠÙ…-Ø§Ù„Ù…Ø¤ØªÙ…Ø±.pdf",
        url: "#",
        sizeKb: 2350,
      },
      {
        id: "att-3",
        type: "link",
        name: "Ø±Ø§Ø¨Ø· Ø§Ù„ØªØµÙ…ÙŠÙ…",
        url: "https://drive.google.com/...",
      },
    ],
    approvals: [
      {
        id: "app-2",
        approver: "Ù…. Ø¹Ø¨Ø¯ Ø§Ù„Ù„Ù‡ Ø§Ù„Ø±Ø´ÙŠØ¯",
        step: 1,
        decision: "approved",
        comment: "ØªÙ… Ø§Ø¹ØªÙ…Ø§Ø¯ Ø§Ù„ØªØµÙ…ÙŠÙ…",
        decidedAt: formatDate("2025-11-02T11:00:00Z"),
      },
    ],
    statusHistory: [
      {
        id: "hst-3",
        status: "pending",
        updatedBy: "Ù†Ø¸Ø§Ù… Ø§Ù„Ù…Ù†ØµØ©",
        updatedAt: formatDate("2025-11-02T09:45:00Z"),
      },
      {
        id: "hst-4",
        status: "in_review",
        updatedBy: "Ù…. Ø¹Ø¨Ø¯ Ø§Ù„Ù„Ù‡ Ø§Ù„Ø±Ø´ÙŠØ¯",
        updatedAt: formatDate("2025-11-02T10:10:00Z"),
      },
      {
        id: "hst-5",
        status: "approved",
        note: "ØªÙ… Ø§Ø¹ØªÙ…Ø§Ø¯ Ø§Ù„ØªØµÙ…ÙŠÙ…",
        updatedBy: "Ù…. Ø¹Ø¨Ø¯ Ø§Ù„Ù„Ù‡ Ø§Ù„Ø±Ø´ÙŠØ¯",
        updatedAt: formatDate("2025-11-02T11:00:00Z"),
      },
      {
        id: "hst-6",
        status: "in_production",
        note: "Ø·Ø¨Ø§Ø¹Ø© Ø¹Ù„Ù‰ Ø®Ø§Ù…Ø© Vinly",
        updatedBy: "ÙØ±ÙŠÙ‚ Ø§Ù„Ø·Ø¨Ø§Ø¹Ø©",
        updatedAt: formatDate("2025-11-02T16:20:00Z"),
      },
    ],
  },
  {
    id: "4fd527a8-253d-4d73-8bb7-cf8304321fbb",
    orderCode: "TP-251028-0012",
    service: {
      id: "svc-paper",
      name: "Ø·Ø¨Ø§Ø¹Ø© Ø§Ù„ÙˆØ±Ù‚ Ø§Ù„Ø±Ø³Ù…ÙŠ",
      slug: "official-paper",
      icon: "ðŸ“„",
    },
    requester: {
      name: "Ù‚Ø³Ù… Ø§Ù„Ù‚Ø¨ÙˆÙ„ ÙˆØ§Ù„ØªØ³Ø¬ÙŠÙ„",
      department: "Ø¹Ù…Ø§Ø¯Ø© Ø§Ù„Ù‚Ø¨ÙˆÙ„",
    },
    submittedAt: formatDate("2025-10-28T08:20:00Z"),
    quantity: 500,
    status: "ready",
    priority: "low",
    requiresApproval: false,
    fieldValues: [
      {
        id: "fv-7",
        fieldId: "paper-paper-type",
        label: "Ù†ÙˆØ¹ Ø§Ù„ÙˆØ±Ù‚",
        key: "paper_type",
        value: "standard",
      },
      {
        id: "fv-8",
        fieldId: "paper-quantity",
        label: "Ø§Ù„ÙƒÙ…ÙŠØ©",
        key: "quantity",
        value: 500,
      },
    ],
    attachments: [],
    approvals: [],
    statusHistory: [
      {
        id: "hst-7",
        status: "pending",
        updatedBy: "Ù†Ø¸Ø§Ù… Ø§Ù„Ù…Ù†ØµØ©",
        updatedAt: formatDate("2025-10-28T08:20:00Z"),
      },
      {
        id: "hst-8",
        status: "approved",
        updatedBy: "Ù…. Ù…Ø±ÙŠÙ… Ø§Ù„Ø¨Ø­ÙŠØ±ÙŠ",
        updatedAt: formatDate("2025-10-28T09:05:00Z"),
      },
      {
        id: "hst-9",
        status: "in_production",
        updatedBy: "ÙˆØ±Ø´Ø© Ø§Ù„Ø·Ø¨Ø§Ø¹Ø©",
        updatedAt: formatDate("2025-10-28T09:30:00Z"),
      },
      {
        id: "hst-10",
        status: "ready",
        note: "Ø¬Ø§Ù‡Ø² Ù„Ù„Ø§Ø³ØªÙ„Ø§Ù… Ù…Ù† Ø§Ù„Ù…Ø³ØªÙˆØ¯Ø¹",
        updatedBy: "Ù…Ø³ØªÙˆØ¯Ø¹ Ø§Ù„Ù…Ø·Ø¨Ø¹Ø©",
        updatedAt: formatDate("2025-10-29T14:45:00Z"),
      },
    ],
  },
];

export function getOrderById(id: string): OrderDetail | undefined {
  return mockOrders.find((order) => order.id.toLowerCase() === id.toLowerCase());
}

export function resolveServiceName(slug: string): string {
  return services.find((service) => service.slug === slug)?.name ?? slug;
}


